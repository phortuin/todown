{% extends "views/_base.html" %}
{% from "components/header/header.html" import header %}

{% block content %}
<main class="main--has-action-bar" role="main">
	{{ header(page.title, { url: '/pages', name: 'Pages' }) }}
	<section class="content page__content">
		{{ page.content | markdown | safe }}
	</section>
</main>

<div class="action" data-action>
	<a href="/pages/{{ page.id }}/edit" class="button button--secondary">Edit page.</a>
	<a href="/tasks/{{ page.id }}/settings" class="button pull-right" data-trigger-modal>Settings.</a>
</div>
{% endblock %}

{% block modal %}
<section class="modal closed modal--small" data-modal hidden>
	<div class="modal__body">
		<form method="post" onchange="this.submit()" action="/pages/{{ page.id }}">
			<input type="hidden" name="_method" value="patch">
			<input type="hidden" name="_action" value="sticky">
			<input type="checkbox" name="is_sticky" id="page:{{ page.id }}:sticky" {% if page.is_sticky %}checked{% endif %}>
			<label for="page:{{ page.id }}:sticky">Sticky</label>
		</form>
		<form method="post" onsubmit="return confirm('Serious.ly')" action="/pages/{{ page.id }}?redirect=/pages">
			<input type="hidden" name="_method" value="delete">
			<button class="button button--secondary">Delete?</button>
		</form>
	</div>
</section>
{% endblock %}
