{% extends "views/_base.html" %}
{% from "components/header/header.html" import header %}

{% block content %}
{{ header('Review', variant = 'review') }}
{# @todo header should be inside main, but this will break prettiness on review page #}
<main role="main" class="main--is-review">
	<form method="post" action="/review">
		<ul class="flat-list review-list">
		{% for task in tasks %}
			{% set nextTaskId = tasks[loop.index0 + 1].id or 'submit' %}
			<li id="task:{{ task.id }}">
				<div class="review-list__item">
					<h2 class="review-list__body">{{ task.title }}</h2>
					<ul data-review-list class="flat-list inline-list review-list__action">
						<li>
							<input type="checkbox" class="a11y-sr-only" name="{{ task.id }}-done" id="task:{{ task.id }}:done" data-next-task-id="task:{{ nextTaskId }}">
							<label for="task:{{ task.id }}:done">Done</label>
						</li>
						<li>
							<input type="checkbox" class="a11y-sr-only" name="{{ task.id }}-delete" id="task:{{ task.id }}:delete" data-next-task-id="task:{{ nextTaskId }}">
							<label for="task:{{ task.id }}:delete">Delete</label>
						</li>
						<li>
							<input type="checkbox" class="a11y-sr-only" name="{{ task.id }}-today" id="task:{{ task.id }}:today" data-next-task-id="task:{{ nextTaskId }}">
							<label for="task:{{ task.id }}:today">Today</label>
						</li>
						<li>
							<a data-skip data-next-task-id="task:{{ nextTaskId }}" href="#task:{{ nextTaskId }}">Skip</a>
						</li>
					</ul>
				</div>
			</li>
		{% endfor %}
			<li id="task:submit">
				<div class="review-list__item">
					<div class="review-list__body">
						<button class="button" type="submit">Submit review</button>
					</div>
				</div>
			</li>
		</ul>
	</form>
</main>
{% endblock %}
